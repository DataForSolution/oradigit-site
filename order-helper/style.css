/* =========================================================
   OraDigit Order Helper — Professional UI
   - Namespaced styles (.oh-*)
   - Light/Dark themes (prefers-color-scheme)
   - Accessible focus, high-contrast text, large targets
   - Responsive grid, print-friendly
========================================================= */

/* ---------- CSS Variables (Theme) ---------- */
:root {
  --oh-bg: #f7f9fc;
  --oh-surface: #ffffff;
  --oh-surface-2: #f2f5fb;
  --oh-text: #0f172a;
  --oh-text-muted: #475569;
  --oh-border: #e3e8f3;
  --oh-border-strong: #cbd5e1;
  --oh-primary: #215bff;
  --oh-primary-600: #1b4ae0;
  --oh-primary-50: #edf2ff;
  --oh-success: #0e9f6e;
  --oh-warn: #b7791f;
  --oh-error: #e11d48;
  --oh-focus: 0 0 0 3px rgba(33, 91, 255, 0.25);
  --oh-radius: 14px;
  --oh-radius-sm: 10px;
  --oh-shadow: 0 8px 24px rgba(15, 23, 42, 0.08);
  --oh-shadow-sm: 0 2px 8px rgba(15, 23, 42, 0.06);
  --oh-code: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  --oh-font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
}

@media (prefers-color-scheme: dark) {
  :root {
    --oh-bg: #0b1220;
    --oh-surface: #0f172a;
    --oh-surface-2: #111a2f;
    --oh-text: #e2e8f0;
    --oh-text-muted: #94a3b8;
    --oh-border: #1f2a44;
    --oh-border-strong: #2b3a5e;
    --oh-primary: #5b8cff;
    --oh-primary-600: #81a5ff;
    --oh-primary-50: #101b37;
    --oh-success: #34d399;
    --oh-warn: #fbbf24;
    --oh-error: #fb7185;
    --oh-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
    --oh-shadow-sm: 0 2px 10px rgba(0, 0, 0, 0.35);
  }
}

/* ---------- Base ---------- */
html, body {
  height: 100%;
}
body {
  margin: 0;
  background: var(--oh-bg);
  color: var(--oh-text);
  font: 16px/1.5 var(--oh-font);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

.container {
  max-width: 1120px;
  padding: 0 1rem;
  margin: 0 auto;
}

/* ---------- Hero ---------- */
.oh-hero {
  background: linear-gradient(0deg, var(--oh-bg), var(--oh-surface-2));
  border-bottom: 1px solid var(--oh-border);
  padding: 2.25rem 0 1rem;
}
.oh-hero h1 {
  margin: 0 0 .25rem;
  font-weight: 800;
  letter-spacing: -0.02em;
}
.oh-hero .sub {
  margin: 0;
  color: var(--oh-text-muted);
}

/* ---------- App Layout ---------- */
.oh-app {
  padding: 1.25rem 0 2.5rem;
}
.oh-grid {
  display: grid;
  grid-template-columns: 1.2fr .8fr;
  gap: 1rem;
}
@media (max-width: 960px) {
  .oh-grid { grid-template-columns: 1fr; }
}

/* ---------- Card ---------- */
.oh-card {
  background: var(--oh-surface);
  border: 1px solid var(--oh-border);
  border-radius: var(--oh-radius);
  box-shadow: var(--oh-shadow);
  padding: 1rem;
}
.oh-card h2 {
  margin: 0 0 .75rem;
}

/* ---------- Form Rows ---------- */
.oh-row {
  display: grid; gap: .5rem; margin-bottom: .9rem;
}
.oh-row.two {
  grid-template-columns: 1fr 1fr;
  gap: .75rem;
}
@media (max-width: 640px) {
  .oh-row.two { grid-template-columns: 1fr; }
}
.hint {
  color: var(--oh-text-muted);
  font-size: .9rem;
}

/* ---------- Inputs ---------- */
.oh-row label {
  font-weight: 600;
  color: var(--oh-text);
}
.oh-row input,
.oh-row select,
.oh-row textarea {
  width: 100%;
  background: var(--oh-surface-2);
  color: var(--oh-text);
  border: 1px solid var(--oh-border);
  border-radius: var(--oh-radius-sm);
  padding: .65rem .8rem;
  font: inherit;
  transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
}
.oh-row textarea {
  resize: vertical;
  min-height: 2.75rem;
}
.oh-row input::placeholder,
.oh-row textarea::placeholder {
  color: var(--oh-text-muted);
}
.oh-row input:focus,
.oh-row select:focus,
.oh-row textarea:focus {
  outline: none;
  border-color: var(--oh-primary);
  box-shadow: var(--oh-focus);
  background: var(--oh-surface);
}

/* ---------- Buttons ---------- */
.btn {
  --_bg: #ffffff;
  --_fg: var(--oh-text);
  --_bd: var(--oh-border-strong);
  border: 1px solid var(--_bd);
  border-radius: 10px;
  background: var(--_bg);
  color: var(--_fg);
  padding: .6rem .9rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform .04s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease;
  box-shadow: var(--oh-shadow-sm);
}
.btn:hover { background: var(--oh-surface-2); }
.btn:active { transform: translateY(1px); }
.btn:focus-visible { outline: none; box-shadow: var(--oh-focus); }

.btn-primary {
  --_bg: var(--oh-primary);
  --_fg: #fff;
  --_bd: var(--oh-primary);
}
.btn-primary:hover { filter: brightness(1.04); }
.btn-ghost {
  background: transparent;
  color: var(--oh-primary);
  border-color: var(--oh-primary-50);
}

/* icon-only small buttons (Copy/Share) */
.icon-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .35rem;
  border: 1px solid var(--oh-border-strong);
  background: var(--oh-surface);
  color: var(--oh-text);
  border-radius: 10px;
  padding: .45rem .6rem;
  font-size: 0.95rem;
  cursor: pointer;
  transition: background .15s ease, border-color .15s ease, box-shadow .15s ease;
}
.icon-btn:hover { background: var(--oh-surface-2); }
.icon-btn:focus-visible { outline: none; box-shadow: var(--oh-focus); }

/* Actions row */
.oh-actions {
  display: flex;
  flex-wrap: wrap;
  gap: .5rem;
  align-items: center;
  margin-top: .25rem;
}

/* ---------- Status ---------- */
.oh-status {
  margin-top: .6rem;
  font-size: .92rem;
  color: var(--oh-text-muted);
}
.oh-status.success { color: var(--oh-success); }
.oh-status.warn    { color: var(--oh-warn); }
.oh-status.error   { color: var(--oh-error); }

/* ---------- Review Panel ---------- */
.review { position: sticky; top: 1rem; align-self: start; }
.oh-review-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: .5rem;
}
.oh-review {
  white-space: pre-wrap;
  font-family: var(--oh-code);
  font-size: .95rem;
  color: var(--oh-text);
  background: var(--oh-surface-2);
  border: 1px dashed var(--oh-border);
  border-radius: var(--oh-radius-sm);
  padding: .75rem .8rem;
  min-height: 160px;
}

/* ---------- Misc ---------- */
.oh-disclaimer {
  color: var(--oh-text-muted);
  font-size: .9rem;
  margin-top: 1rem;
}

/* ---------- Utility ---------- */
.mt-1 { margin-top: .25rem; }
.mt-2 { margin-top: .5rem; }
.mt-3 { margin-top: .75rem; }
.mt-4 { margin-top: 1rem; }

/* ---------- Reduced Motion ---------- */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
}

/* ---------- Print ---------- */
@media print {
  body { background: #fff; color: #000; }
  .oh-hero, .oh-actions, .oh-status { display: none !important; }
  .oh-card { box-shadow: none; border-color: #bbb; }
  .review { position: static; }
}

/* ---------- Optional: Form field validation states ---------- */
.oh-row input[aria-invalid="true"],
.oh-row select[aria-invalid="true"],
.oh-row textarea[aria-invalid="true"] {
  border-color: var(--oh-error);
  box-shadow: 0 0 0 3px rgba(225, 29, 72, .15);
}

/* ---------- Optional: Small helper badges ---------- */
.oh-badge {
  display: inline-block;
  padding: .25rem .5rem;
  border-radius: 999px;
  font-size: .75rem;
  border: 1px solid var(--oh-border-strong);
  background: var(--oh-surface-2);
  color: var(--oh-text-muted);
}

/* ---------- Accessibility tweaks for selects ---------- */
select {
  appearance: none;
  background-image:
    linear-gradient(45deg, transparent 50%, currentColor 50%),
    linear-gradient(135deg, currentColor 50%, transparent 50%),
    linear-gradient(to right, transparent, transparent);
  background-position:
    calc(100% - 18px) calc(50% - 3px),
    calc(100% - 13px) calc(50% - 3px),
    calc(100% - 2.25rem) 0.5rem;
  background-size: 5px 5px, 5px 5px, 1px 1.8rem;
  background-repeat: no-repeat;
  padding-right: 2.25rem;
}
/* Order Helper Buttons - ensure visibility */
#btnSuggest,
#btnReset {
  background-color: #1a53ff;   /* Bright blue */
  color: #ffffff;              /* White text */
  border: none;
  border-radius: 6px;
  padding: 0.6rem 1.2rem;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.25s ease, transform 0.1s ease;
}

#btnSuggest:hover,
#btnReset:hover {
  background-color: #003bbd;   /* Darker blue on hover */
  transform: translateY(-1px);
}

#btnSuggest:active,
#btnReset:active {
  transform: translateY(0);
}
/* ---- FIX: make all form controls (esp. <select>) readable ---- */
:root {
  --oh-bg: #ffffff;
  --oh-text: #0f172a;
  --oh-muted: #64748b;
  --oh-border: #cbd5e1;
  --oh-bg-muted: #f8fafc;
}
@media (prefers-color-scheme: dark) {
  :root {
    --oh-bg: #0b1220;
    --oh-text: #e5e7eb;
    --oh-muted: #9aa4b2;
    --oh-border: #334155;
    --oh-bg-muted: #0f172a;
  }
}

/* Apply sane defaults */
select,
input[type="text"],
input[type="date"],
textarea {
  color: var(--oh-text) !important;
  background: var(--oh-bg) !important;
  border: 1px solid var(--oh-border) !important;
  border-radius: 10px;
  padding: 0.65rem 0.8rem;
  font: inherit;
}

/* Placeholder / first disabled option (the “Select …” row) */
select option[disabled],
select option[value=""],
input::placeholder,
textarea::placeholder {
  color: var(--oh-muted) !important;
}

/* Make actual options readable on all platforms */
select option {
  color: var(--oh-text) !important;
  background: var(--oh-bg) !important; /* fixes white-on-white in some themes */
}

/* If you used a custom appearance earlier, keep text visible */
select {
  -webkit-appearance: auto !important;
  -moz-appearance: auto !important;
  appearance: auto !important;
}

/* Disabled state still looks disabled, but readable */
select:disabled,
input:disabled,
textarea:disabled {
  color: var(--oh-muted) !important;
  background: var(--oh-bg-muted) !important;
}

/* Status bar should never hide behind anything */
.oh-status, #status { z-index: 2; }
/* ====== Order Helper: HTML class bridge & utilities (append at end) ====== */

/* Utility to toggle elements from JS (used for Indication “Other”, CT contrast, etc.) */
.hidden { display: none !important; }

/* Bridge: the HTML uses .oh-form .field and .oh-aside .card — map them to the theme tokens */
.oh-form .field {
  display: grid;
  gap: .5rem;
  margin-bottom: .9rem;
}
.oh-aside .card {
  background: var(--oh-surface);
  border: 1px solid var(--oh-border);
  border-radius: var(--oh-radius);
  box-shadow: var(--oh-shadow);
  padding: 1rem;
}

/* Status bar (your #status element uses class="status …") */
#status.status { 
  margin-top: .6rem; 
  font-size: .92rem; 
  color: var(--oh-text-muted);
}
#status.status.success { color: var(--oh-success); }
#status.status.warn    { color: var(--oh-warn); }
#status.status.error   { color: var(--oh-error); }

/* Context chips (rendered by app.js) */
#contextChips { 
  display: flex; 
  flex-wrap: wrap; 
  gap: .4rem; 
}
#contextChips .oh-chip {
  border: 1px solid var(--oh-border-strong);
  background: var(--oh-surface);
  color: var(--oh-text);
  border-radius: 999px;
  padding: .35rem .6rem;
  font-size: .9rem;
  cursor: pointer;
  transition: background .15s ease, border-color .15s ease, box-shadow .15s ease;
}
#contextChips .oh-chip:hover { background: var(--oh-surface-2); }
#contextChips .oh-chip[aria-pressed="true"] {
  background: var(--oh-primary);
  color: #fff;
  border-color: var(--oh-primary);
}

/* Clinical Indication preview box on the right panel */
.indication-box {
  background: var(--oh-surface-2);
  border: 1px dashed var(--oh-border);
  border-radius: var(--oh-radius-sm);
  padding: .6rem .7rem;
  white-space: pre-wrap;
}

/* CT contrast fieldset styling (shown/hidden by JS) */
.oh-contrast {
  border: 1px solid var(--oh-border);
  border-radius: var(--oh-radius-sm);
  padding: .6rem .8rem;
  background: var(--oh-surface);
}
.oh-contrast legend { font-weight: 600; }
#btnAI {
  background-color: #007bff;  /* bright blue */
  color: white;
  font-weight: bold;
  border: none;
  border-radius: 6px;
  padding: 8px 16px;
  cursor: pointer;
}

#btnAI:hover {
  background-color: #0056b3;  /* darker blue on hover */
}
/* Ask AI response box styling */
#aiResponse {
  background-color: #ffffff;   /* white background */
  color: #000000;              /* black text */
  padding: 1rem;
  border-radius: 8px;
  margin-top: 1rem;
}

#aiResponse h3 {
  color: #000000;              /* ensure heading is black */
  font-weight: bold;
}

#aiText {
  background-color: #f9f9f9;   /* light gray inner box */
  color: #000000;              /* black text */
  padding: 0.75rem;
  border-radius: 6px;
  white-space: pre-wrap;       /* preserve line breaks */
}
